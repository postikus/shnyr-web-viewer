<!DOCTYPE html>
<html>
<head>
	<title>OCR Results</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
<div class="container">
	<div class="header">
		<div class="header-content">
			<div class="title-section">
				<h1>ğŸ‘“ Ğ¨ĞĞ«Ğ Ğ¬ v0.2</h1>
			</div>
			<div class="status-section">
				<div class="status-info">
					<span class="status-label">Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:</span>
					<span class="status-value">{{formatStatus .Status.CurrentStatus}}</span>
					{{if .Status.UpdatedAt}}
					<span class="status-time">({{formatDateTime .Status.UpdatedAt}})</span>
					{{end}}
				</div>
				<div class="control-buttons">
					<button class="control-btn start-btn" onclick="sendAction('start')">ğŸš€ Start</button>
					<button class="control-btn stop-btn" onclick="sendAction('stop')">ğŸ›‘ Stop</button>
					<button class="control-btn restart-btn" onclick="sendAction('restart')">ğŸ”„ Restart</button>
				</div>
			</div>
		</div>
		
		<div class="tabs">
			<a href="/?tab=main" class="tab {{if eq .ActiveTab "main"}}active{{end}}">ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ</a>
			<a href="/?tab=item_search" class="tab {{if eq .ActiveTab "item_search"}}active{{end}}">ğŸ” ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñƒ</a>
		</div>
	</div>
	
	<div class="content">
		{{if eq .ActiveTab "item_search"}}
			{{template "item_search.html" .}}
		{{else}}
			{{template "main_tab.html" .}}
		{{end}}
	</div>
</div>

<!-- ĞœĞ¾Ğ´Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¾ĞºĞ½Ğ° -->
{{template "modals.html" .}}

<script src="/static/js/app.js"></script>
<script>
function sendAction(action) {
	console.log('ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:', action);
	
	fetch('/' + action, {
		method: 'POST',
		headers: {
			'Content-Type': 'application/json',
		}
	})
	.then(response => {
		if (response.ok) {
			console.log('Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ', action, 'ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾');
			// ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ñ‡ĞµÑ€ĞµĞ· 1 ÑĞµĞºÑƒĞ½Ğ´Ñƒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ
			setTimeout(() => {
				window.location.reload();
			}, 1000);
		} else {
			console.error('ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ:', response.status);
			alert('ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ: ' + response.status);
		}
	})
	.catch(error => {
		console.error('ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ‚Ğ¸:', error);
		alert('ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ‚Ğ¸ Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ');
	});
}

function formatStatus(status) {
	if (status === 'stop') {
		return 'Ğ¡Ğ¢Ğ ĞĞ”ĞĞ•Ğ¢ Ğ¥Ğ£Ğ™ĞĞ•Ğ™';
	} else if (status === 'start' || status === 'restart') {
		return 'ĞĞ¥ĞĞ¢Ğ ĞĞ Ğ›ĞĞ¥Ğ';
	} else {
		return status || 'ĞĞ•Ğ˜Ğ—Ğ’Ğ•Ğ¡Ğ¢ĞĞ';
	}
}
</script>
</body>
</html> 